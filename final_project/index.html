<!DOCTYPE html>
<html>
<head>
    <link href='https://fonts.googleapis.com/css?family=Fredericka the Great' rel='stylesheet'>
    <style>
    </style>
    <title>Final Project</title>
    <link rel="stylesheet" type="text/css" rel="noopener" target="_blank" href="../style.css">
</head>
<body>
    <div style="width:100%;"> 
        <div style="float:left; width:80%;">
            <h1>PHYS S-12 -- Joshua Varon's Final Project</h1>
            <br />
        </div>
        <div style="float:right; width:10%; text-align: right;">
            <h1><a href="../about/index.html" style="color:darkgray; font-weight: normal; text-decoration: none;">About</a></h1>
            <br />
        </div>
        <div style="float:right; width:10%; text-align: right;">
            <h1><a href="../index.html" style="color:darkgray; font-weight: normal; text-decoration: none;">Home</a></h1>
            <br />
        </div>
        <hr width="100%;" 
        color="black" 
        size="2" 
        align="middle">    
    </div>
    <div style="width:100%;">
        <h2>Final Project Video</h2>
        <div style="width:100%; padding-bottom: 630px;"> 
            <div style="float:left; width:100%; text-align: center;">
                <video width="1050" autoplay controls>
                    <source src="Final Project Video.mp4" type="video/mp4">
                </video>
                <br />
                Fig 1. Final Project Video
                <br />
            </div>
        </div>
    </div>
    <hr width="100%;" 
        color="black" 
        size="2" 
        align="middle">
    <h2>Acknowledgements</h2>
    <h3>I'd like to thank Professor Melenbrink for his advice and mentorship throughout the entirety of my project. Specifically, his insights with how to use capacitive touch and project integration were both instrumental.</h1>
    <h3>I would also like to thank Kassia for her numerous contributions to my project. Specifically, her help using the vinyl cutter, her ingenuitive solution to cutting copper tape, and her focus with helping me fix circuitry issues.</h1>
    <h3>Similarly, I want to thank Ibrahim for his help in the planning portion of my project. Ibrahim helped me turn my vision into a concrete plan, as well as offering insights into how I can achieve the more difficult aspects of it.</h3>
    <h3>Additionally, I want to thank Bobby for his mentorship in video editing. I learned a lot about video editing techniques, as well as general filmography, which were both crucial in my project.</h3>
    <h3>Lastly, I want the thank all of the teaching staff for keeping the lab open and available to our class as much as possible. I would not have been able to finish my project without their efforts.</h3>
    <h2>Motivation</h2>
    <p>In the age of digital learning, some educators are struggling with managing the virtual aspects of their classrooms. Along with this, students are finding it difficult to collaborate with others, losing out on both the educative and social-emotional benefits that come from group work.</p>
    <p>I believe that these problems would be greatly aided by a drawing machine that works with chalk. While I will only design a proof of concept, I can imagine a similar idea being used such that students and educators can draw on each other's chalkboards virtually. This will greatly improve their ability to work in groups as we adapt to the new age of education.</p>
    <h2>Planning</h2>
    <p>To begin, I have to choose which type of drawing machine I want to make. After looking at these <a href="Precedent/index.html" style="font-weight: normal; text-decoration: none;">precedents</a>, I decided that I wanted to make a drawing machine that used cords with changing lengths for locomotion. These were some of the sketches Ibrahim and I made:</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:30%; text-align: center;">
            <img src="image.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 2. Planning with Ibrahim
            <br />
        </div>
        <div style="float:left; width:70%; text-align: center;">
            <img src="../../week1/diagram.png" alt="Drawing Apparatus Design V1" style="height:415px;">
            <br />
            Fig 3. Drawing Apparatus Design V1
            <br />
        </div>
    </div>
    <p>As you can see, this simplified into a fairly simple problem. Using basic trigonometry, I would be able to determine the two string lengths to move the chalk to a certain position (one can think of these lengths as radii of two intersecting circles).</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="image (1).png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 4. Trigonometry Sketch
            <br />
        </div>
    </div>
    <p>One idea that changed from these sketches was my input device. While I originally planned on using a gyroscope, I eventually decided to use a capacitive touch matrix.</p>
    <h2>First Drafts</h2>
    <h3>Lesson 5</h3>
    <p>In Lesson 5 we learned about 3D design and printing. Anticipating my need for a chalk holder, I designed 3 hollow cylinders with different radii.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="Screenshot 2023-08-06 205811.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 5. Hollow Cylinders
            <br />
        </div>
    </div>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="Screenshot 2023-08-06 205842.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 6. Radii
            <br />
        </div>
    </div>
    <p>After printing these out, I was able to test them and find the right radius for my chalk holder.</p>
    <p>I then began designing the final holder. This was how the design evolved.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:50%; text-align: center;">
            <img src="Screenshot 2023-08-06 210618.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 7. First Design
            <br />
        </div>
        <div style="float:left; width:50%; text-align: center;">
            <img src="Screenshot 2023-08-06 205951.png" alt="Drawing Apparatus Design V1" style="height:415px;">
            <br />
            Fig 8. Second and Final Design
            <br />
        </div>
    </div>
    <h3>Lesson 6</h3>
    <p>In Lesson 6 we learned about input devices, including capacitive touch. I decided to use a capacitive touch matrix as my input device, and began designing one. This one worked as a rectangular matrix, and after doing some testing, did not work well.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="../week6/copper4.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 9. Square Matrix
            <br />
        </div>
    </div>
    <p>I decided to make a new design using the knowledge I had gained from my first time around. This was the design I came up with.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="Screenshot 2023-08-06 211051.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 10. Circular Matrix
            <br />
        </div>
    </div>
    <p>As you can see, I have a tx plate on the back of my controller, with many rx pads on the front. Additionally, I have a ring connected to true ground going around the outside to let the device have even more knowledge about where my finger is.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:50%; text-align: center;">
            <img src="IMG_4465.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 11. Front of Device
            <br />
        </div>
        <div style="float:left; width:50%; text-align: center;">
            <img src="IMG_4467.png" alt="Drawing Apparatus Design V1" style="height:415px;">
            <br />
            Fig 12. Back of Device
            <br />
        </div>
    </div>
    <h3>Lesson 7</h3>
    <p>While not an official part of my project, I took the week of this lesson to learn how to use stepper motors. This was how I wired them up (using the A4988 stepper motor driver).</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="Screenshot 2023-08-06 212809.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 13. A4988 Wiring
            <br />
        </div>
    </div>
    <p>And this was the code I used to drive it.</p>
    <div style="float:left; width:100%; text-align: center;">
        <iframe src=https://create.arduino.cc/editor/joshuavaron/c8fae7f1-edb2-4d18-b16a-92724db00c73/preview?embed style="height:410px;width:700px;margin:10px 0" frameborder=0></iframe>
    </div>
    <p>As you can see I was able to do microstepping fairly easily. I chose not to use any libraries for this task as well, opting to control steps manually.</p>
    <h3>Lesson 9</h3>
    <p>In Lesson 9 I made use of ESP-NOW to communicate via radio between two ESP32s. This allowed me to use one ESP for input and another for output. The input ESP was able to do the calculations to determine string lengths, while the output ESP could drive the stepper motors.</p>
    <p>This process is fully documented in Lesson 9.</p>
    <h2>Project Integration</h2>
    <p>First, I began working on my output device. I started by designing spools to go on the stepper motors.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="Screenshot 2023-08-06 213000.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 14. Final Spool
            <br />
        </div>
    </div>
    <p>Next, I used what I did in Lesson 7 to connect and drive two NEMA 17 stepper motors.</p>

    <p>After this, I made some rough calculations of what I would need to do to move the chalk holder (Lesson 5) to various coordinates. This can be seen in my drawings.</p>

    <p>Here are some videos of tests I did.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:50%; text-align: center;">
            <video width="415" autoplay loop muted>
                <source src="IMG_4412.mov" type="video/mp4">
            </video>
            <br />
            Fig 15. First Vertical Test
            <br />
        </div>
        <div style="float:left; width:50%; text-align: center;">
            <video width="415" autoplay loop muted>
                <source src="IMG_4430.mov" type="video/mp4">
            </video>
            <br />
            Fig 16. Smoother Horizontal Test
            <br />
        </div>
    </div>
    <p>And here are progressively more advanced drawings that the machine was able to make.</p>
    <div style="width:100%; padding-bottom: 370px;"> 
        <div style="float:left; width:33%; text-align: center;">
            <img src="IMG_4418.png" alt="3D render of design" style="width:350px;height:350px;">
            <br />
            Fig 17. Shaky Line
            <br />
        </div>
        <div style="float:right; width:33%; text-align: center;">
            <img src="IMG_4429.png" alt="Drawing Apparatus Design V1" style="width:350px;height:350px;">
            <br />
            Fig 19. First Polygon
            <br />
        </div>
        <div style="float:right; width:33%; text-align: center;">
            <img src="71182704029__95DC57C3-BFE2-40EF-8A1C-947671B88F39.png" alt="Drawing Apparatus Design V1" style="width:350px;height:350px;">
            <br />
            Fig 18. First Angle
            <br />
        </div>    
    </div>
    <p>I would eventually return to this device, but for now I moved on to my input device.</p>
    <p>To start, I used my matrix from Lesson 6.</p>

    <p>I then wired all of the rx pads to analog pins, the tx pad to a digital pin, and the true ground ring to the ESP's ground.</p>

    <p>Once I had this done, I wrote this program to determine which position the chalk should move to when I was touching different parts of the matrix.</p>
    <div style="float:left; width:100%; text-align: center;">
        <iframe src=https://create.arduino.cc/editor/joshuavaron/b05eec26-6fbd-412e-b3ea-900206d44b5f/preview?embed style="height:710px;width:700px;margin:10px 0" frameborder=0></iframe>
    </div>
    <p>Going back to my output device, I now needed to figure out how to mount this above the blackboard.</p>
    <p>At first, I tried mouting all of the components to a wooden board.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="IMG_4496.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 20. Wooden Board with Holes for Stepper Motor
            <br />
        </div>
    </div>
    <p>However, Professor Melenbrink pointed out that it would be significantly more elegant if my device could operate at multiple dimensions. To achieve this effect, I decided to mount the motors to brackets which would be attatched to the blackboard. I first created a design to cut on the Wazer waterjet.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="Screenshot 2023-08-06 221020.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 21. Sketch of Bracket Net
            <br />
        </div>
    </div>
    <p>Next, I bent the brackets into shape.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="IMG_4503.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 22. Machine Used to Bend Stainless Steel
            <br />
        </div>
    </div>
    <p>I then attatched the motors and spools to them. This was how the final product looked.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="IMG_4505.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 23. Final Motor Unit
            <br />
        </div>
    </div>
    <p>I also attatched all my circuitry to a wooden board which was placed behind the chalkboard as well.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="IMG_4489.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 24. Circuitry
            <br />
        </div>
    </div>
    <p>After wiring my project up, this was my how it all looked.</p>
    <div style="width:100%; padding-bottom: 435px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="IMG_4487.png" alt="Basic Sketch" style="height:415px;">
            <br />
            Fig 25. Final Project
            <br />
        </div>
    </div>
    <p>I then used code similar to that from Lesson 9. This gave me my final project.</p>
    <div style="float:left; width:100%; text-align: center;">
        <iframe src=https://create.arduino.cc/editor/joshuavaron/75fc4976-ed04-4fbe-95cd-7bbb07a5cbd9/preview?embed style="height:710px;width:700px;margin:10px 0" frameborder=0></iframe>
    </div>
    <div style="float:left; width:100%; text-align: center;">
        <iframe src=https://create.arduino.cc/editor/joshuavaron/1379c95f-e932-4581-9750-a345e0e41eaf/preview?embed style="height:710px;width:700px;margin:10px 0" frameborder=0></iframe>
    </div>
    <h2>Final Project Summary</h2>
    <h3>Materials</h3>
    <ul>
    <li>2 Arduino ESP32-S2</li>
    <li>2 Stepper Motors</li>
    <li>[Uncounted] Pin to Socket Wires</li>
    <li>[Uncounted] Pin to Pin Wires</li>
    <li>[Uncounted] Socket to Socket Wires</li>
    <li>1 Stick of Chalk</li>
    <li>1 Computer (with Arduino IDE)</li>
    <li>String, approx. 8ft</li>
    <li>12v power supply</li>
    <li>5v power supply</li>
    <li>Stainless Steel</li>
    <li>Copper Tape</li>
    <li>Plywood</li>
    <li>Vinyl</li>
    <li>PLA, [unmeasured length]</li>
    <li>Prusa Mk3 3D Printer</li>
    <li>Assorted Tools</li>
    </ul>
    <h3>Main Components</h3>
    <ul>
    <li>Suspension drawing machine</li>
    <li>Mounting brackets</li>
    <li>Capacitive touch matrix</li>
    <li>ESP-NOW communication</li>
    </ul>
    <h3>Project Fair Picture</h3>
    <div style="width:100%; padding-bottom: 620px;"> 
        <div style="float:left; width:100%; text-align: center;">
            <img src="IMG_4501.png" alt="Basic Sketch" style="height:600px;">
            <br />
            Fig 26. All Drawings Made During Fair
            <br />
        </div>
    </div>
    <h2>Files Mentioned in this Document</h2>
    <a href="Spool Final.f3d" download><p>Spool (.F3D)</p></a>
    <a href="Chalk Holder Final.f3d" download><p>Chalk Holder (.F3D)</p></a>
    <a href="Capacitive Touch Matrix Final.dxf" download><p>Capacitive Touch Matrix (.DXF)</p></a>
    <a href="Brackets Final.dxf" download><p>Bracket Net (.DXF)</p></a>
    <a href="Simple_Stepper_Driver.ino" download><p>Stepper Driver Code (.INO)</p></a>
    <a href="Coordinate_Calculation.ino" download><p>Coordinate Calculation (.INO)</p></a>
    <a href="Final_Output.ino" download><p>Output Code (.INO)</p></a>
    <a href="Final_Input.ino" download><p>Input Code (.INO)</p></a>
</body>
</html>